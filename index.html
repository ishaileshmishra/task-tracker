<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shailesh's Task Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: { extend: {} },
      };
      function filterTasks() {
        const keyword = document.getElementById("search").value.toLowerCase();
        document.querySelectorAll(".task-card").forEach((card) => {
          card.style.display = card.innerText.toLowerCase().includes(keyword)
            ? "block"
            : "none";
        });
      }
      function toggleDarkMode() {
        document.documentElement.classList.toggle("dark");
      }
      function filterMonth(month) {
        document.querySelectorAll(".month-section").forEach((section) => {
          section.style.display =
            month === "all" || section.dataset.month === month
              ? "block"
              : "none";
        });
      }
      function downloadPDF() {
        window.print();
      }
    </script>
    <script src="js/taskManager.js"></script>
    <script src="chart.js"></script>
    <script src="admin.js"></script>
    <script>
      // Initialize the dashboard when the page loads
      document.addEventListener("DOMContentLoaded", function () {
        window.taskManager.initializeDashboard();
      });
    </script>
  </head>
  <body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100">
    <header
      class="bg-blue-800 dark:bg-blue-900 text-white p-6 text-center shadow relative"
    >
      <h1 class="text-3xl font-bold">Shailesh's Monthly Task Tracker</h1>
      <p class="text-sm mt-2">
        Tracking completed assignments and project updates
      </p>
      <div class="mt-4 space-x-2">
        <button
          onclick="toggleDarkMode()"
          class="bg-white text-blue-800 dark:bg-gray-800 dark:text-white px-4 py-2 rounded shadow"
        >
          Toggle Dark Mode
        </button>
        <button
          onclick="downloadPDF()"
          class="bg-white text-blue-800 dark:bg-gray-800 dark:text-white px-4 py-2 rounded shadow"
        >
          Download PDF
        </button>
      </div>
      <button
        onclick="showAdminLogin()"
        class="absolute top-6 right-6 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded shadow"
      >
        Admin Panel
      </button>
    </header>

    <!-- Admin Login Modal -->
    <div
      id="adminLoginModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
    >
      <div
        class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-md w-full"
      >
        <h2 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">
          Admin Login
        </h2>
        <input
          type="password"
          id="adminPassword"
          placeholder="Enter admin password"
          class="w-full p-2 mb-4 border rounded dark:bg-gray-700 dark:text-white"
        />
        <div class="flex justify-end space-x-2">
          <button
            onclick="closeAdminLogin()"
            class="px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded"
          >
            Cancel
          </button>
          <button
            onclick="validateAdmin()"
            class="px-4 py-2 bg-blue-600 text-white rounded"
          >
            Login
          </button>
        </div>
      </div>
    </div>

    <!-- Admin Panel Modal -->
    <div
      id="adminPanelModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
    >
      <div
        class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-2xl w-full"
      >
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold text-gray-800 dark:text-white">
            Add New Task
          </h2>
          <button
            onclick="closeAdminPanel()"
            class="text-gray-500 hover:text-gray-700 dark:text-gray-400"
          >
            âœ•
          </button>
        </div>
        <form id="taskForm" class="space-y-4">
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >Month</label
            >
            <select
              id="taskMonth"
              class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white"
            >
              <option value="april">April</option>
              <option value="may">May</option>
              <option value="july">July</option>
            </select>
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >Title</label
            >
            <input
              type="text"
              id="taskTitle"
              class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white"
              required
            />
          </div>
          <div>
            <label
              class="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >Description</label
            >
            <textarea
              id="taskDescription"
              class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white"
              rows="4"
              required
            ></textarea>
          </div>
          <div class="flex justify-end">
            <button
              type="submit"
              class="px-4 py-2 bg-blue-600 text-white rounded"
            >
              Add Task
            </button>
          </div>
        </form>
      </div>
    </div>

    <section class="max-w-6xl mx-auto p-4">
      <input
        type="text"
        id="search"
        oninput="filterTasks()"
        placeholder="Search tasks by keyword..."
        class="w-full p-3 rounded border mb-6 dark:bg-gray-800 dark:border-gray-700"
      />

      <!-- Filters -->
      <div class="mb-6 space-x-2">
        <button
          onclick="filterMonth('all')"
          class="px-3 py-1 bg-gray-300 dark:bg-gray-700 rounded"
        >
          All
        </button>
        <button
          onclick="filterMonth('april')"
          class="px-3 py-1 bg-purple-300 dark:bg-purple-700 rounded"
        >
          April
        </button>
        <button
          onclick="filterMonth('may')"
          class="px-3 py-1 bg-green-300 dark:bg-green-700 rounded"
        >
          May
        </button>
        <button
          onclick="filterMonth('july')"
          class="px-3 py-1 bg-blue-300 dark:bg-blue-700 rounded"
        >
          July
        </button>
      </div>

      <!-- Stats Chart -->
      <div class="bg-white dark:bg-gray-800 p-4 rounded shadow mb-10">
        <h2 class="text-xl font-semibold mb-4">Monthly Task Summary</h2>
        <canvas id="taskChart"></canvas>
      </div>

      <!-- Timeline Layout -->
      <div
        class="relative border-l border-gray-300 dark:border-gray-600 ml-4 timeline-container"
      >
        <!-- Tasks will be dynamically loaded here -->
      </div>
    </section>

    <footer
      class="bg-blue-800 dark:bg-blue-900 text-white text-center p-4 mt-8"
    >
      <p>&copy; 2025 Shailesh Mishra. All rights reserved.</p>
    </footer>
  </body>
</html>
